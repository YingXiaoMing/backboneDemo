<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
	</head>
	<body>
		<div id="appView"></div>
	</body>
	<script type="text/javascript" src="js/jquery.js" ></script>
	<script type="text/javascript" src="js/underscore.js" ></script>
	<script type="text/javascript" src="js/backbone.js" ></script>
	<script type="text/javascript" src="js/index.js" ></script>
	<script>
		//underscore语法
		$(function(){
//			var data ={
//				name : "xiaoming",
//				email : "xiaomingyings@163.com"
//			};
//			var object = _(data);
//			console.log("name:"+object.value().name+",email:"+object.value().email);
//			//无返回值
//			var blnfind = _.find([2,4,6,8,10],function(n){return (!(n%2 == 0))});
//			console.log(blnfind == undefined?"未找到":blnfind);
//			//有返回值
//			var arrfind = _.filter([1,3,5,6,8,9],function(n){return (!(n%2 == 0))});
//			console.log(arrfind == undefined?"还是未找到":arrfind);
//			var stu = [
//				{name : 'xiaoming', age : 16},
//				{name : 'xiaoying', age : 22},
//				{name : 'xiaobai', age : 25}
//			];
//			var min = _.min(stu,function(n){return n.age});
//			console.log("最小年龄的人名字是：" + min.name);
//			//默认是升序的
//			var sorts = _.sortBy(stu,function(n){return n.age});
//			for (var p in sorts){
//				console.log(sorts[p].name + "->" + sorts[p].age);
//			}
//			var groups = _.groupBy(stu,function(n){return n.age >16});
//			console.log(groups);
//			var student = ['xiaoming','xiaoying','xiaohua','xiaoji','xiaoying'];
//			var find = _.lastIndexOf(student,'xiaoying',4);
//			console.log("最后出现的位置是："+find);
//			var newArr  = _.without([40,50,6,60,60],6,60);
//			console.log("出现的新数组："+newArr);
//			var fun = function(v){
//				console.log("your name is："+v);
//			}
//			_.delay(fun,3000,"xiaoming");
//			var input = function(s,n){
//				return n == 1? s+"女士":s+"先生"
//			};
//			input = _.wrap(input,function(input){
//				return "你好，" + input("霍杏樱",1)+",welcome to come back!";
//			})
//			console.log(input());
//			var info ={
//				name : "xiaoming",
//				sex : "男",
//				email : "xiaomingyings@163.com"
//			}
//			var strShow;
//			if(_.has(info,'email')){
//				strShow = info.email;
//			}else{
//				strShow ="没有相对应的value";
//			}
//			console.log(strShow);


			var person = Backbone.Model.extend({
				defaults : {
					name : "",
					sex : "女"
				}
			});
			var men = new person;
			men.on("change",function(){
				console.log("对象的属性发生了变化了！");
			});
			men.on("change:name",function(model,value){
				console.log("你的名字已经发生变化，你现在的名字是：" + value);
			});
			men.set("name","小茗");
			var per = Backbone.Model.extend({
			defaults : {
				name : "xiaoming",
				sex : "男",
				age : 32,
				score : 120
			}
			});
			var man = new per;
//			man.on("change:age change:score",function(model,value){
//				var oldAge = model.previous("age");
//				var newAge = model.get("age");
//				var oldScore = model.previous("score");
//				var newScore = model.get("score");
//				if(newAge>oldAge){
//					console.log("姐，你年龄太大了，不适合我。");
//				}else{
//					console.log("姐，其实我跟你都挺匹配的！")
//				}
//				if(newScore>oldScore){
//					console.log("哟，小伙子有进步哦");
//				}else{
//					console.log("小伙子，你不行了，你比我之前的低"+(oldScore - newScore));
//				}
//			});
//			var objEvent = {
//				"change:score" : score_change,
//				"change:age" : age_change
//			}
//			man.on(objEvent);
//			function score_change(model,value){
//				var oldScore = model.previous("score");
//				var newScore = model.get("score");
//				if(newScore>oldScore){
//					console.log("哟，小伙子有进步哦");
//				}else{
//					console.log("小伙子，你不行了，你比我之前的低"+(oldScore - newScore));
//				}
//			}
//			function age_change(model,value){
//				var oldAge = model.previous("age");
//				var newAge = model.get("age");
//				if(newAge>oldAge){
//					console.log("姐，你年龄太大了，不适合我。");
//				}else{
//					console.log("姐，其实我跟你都挺匹配的！")
//				}
//			}
//			man.set({"age":36,"score":200});
			var obj = _.extend({},Backbone.Events);
			obj.listenTo(man,"change:age",function(model,value){
				var newAge = model.get("age");
				var oldAge = model.previous("age");
				if(oldAge > newAge){
					console.log("哇，你竟然比我小"+(oldAge-newAge));
				}else{
					console.log("亲，听说你的年龄比我大"+(newAge-oldAge));
				}
			});
			man.set("age",12);
		});
		
	</script>
</html>
